{% extends 'core/base.html' %}
{% block content_title %}Listar Receitas{% endblock %}
{% block content %}
<div class="container-fluid" style="width: 100%; padding-right: 0;">
  <div class="card border-0 shadow-sm" style="border-radius: 15px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);">
    <div class="card-header bg-gradient d-flex justify-content-between align-items-center" style="background: linear-gradient(45deg, #dc3545, #e4606d); border-top-left-radius: 15px; border-top-right-radius: 15px; padding: 1rem 1.5rem;">
      <h5 class="text-white m-0" style="font-size: 1.4rem; font-weight: 600; letter-spacing: 0.5px;">Listar Receitas</h5>
      <a href="{% url 'receitas:criar_receita' %}" class="btn btn-success btn-sm" style="color: #fff; font-weight: 500; padding: 0.375rem 1rem; transition: all 0.3s ease;">
        <i class="bi bi-plus-circle me-1"></i> Nova Receita
      </a>
    </div>
    <div class="card-body p-4" style="background: #f8f9fa; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
      {% if messages %}
      <div class="alert alert-success alert-dismissible fade show mb-4" role="alert" style="color: #155724; background-color: #d4edda; border-color: #c3e6cb; border-radius: 10px; font-size: 1rem; font-weight: 400; padding: 1rem;">
        {% for message in messages %}
        {{ message }}
        {% endfor %}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      {% endif %}
      {% if receitas %}
      <div class="table-responsive">
        <table class="table table-striped table-hover" style="color: #333; border-radius: 10px; overflow: hidden;">
          <thead>
            <tr class="bg-light" style="border-bottom: 2px solid #dee2e6;">
              <th style="font-size: 1.1rem; font-weight: 600; padding: 1rem; width: 15%;">Imagem</th>
              <th style="font-size: 1.1rem; font-weight: 600; padding: 1rem;">Nome</th>
              <th style="font-size: 1.1rem; font-weight: 600; padding: 1rem;">Rendimento</th>
              <th style="font-size: 1.1rem; font-weight: 600; padding: 1rem;">Ações</th>
            </tr>
          </thead>
          <tbody>
            {% for receita in receitas %}
            <tr style="border-bottom: 1px solid #eee;">
              <td style="padding: 0.75rem; vertical-align: middle;">
                {% if receita.imagem %}
                <img src="{{ receita.imagem.url }}" alt="{{ receita.nome }}" class="img-fluid rounded" style="max-height: 50px; max-width: 50px; object-fit: cover; border: 1px solid #ddd;">
                {% else %}
                <div class="placeholder-img rounded" style="background: #ddd; height: 50px; width: 50px; line-height: 50px; text-align: center; color: #888; font-size: 0.9rem;">Sem Imagem</div>
                {% endif %}
              </td>
              <td style="font-size: 1rem; font-weight: 400; padding: 0.75rem; vertical-align: middle;"><a href="{% url 'receitas:detalhar_receita' receita.pk %}" class="text-decoration-none text-dark" style="transition: color 0.3s ease;">{{ receita.nome }}</a></td>
              <td style="font-size: 1rem; font-weight: 400; padding: 0.75rem; vertical-align: middle;">{{ receita.rendimento }} porções</td>
              <td style="padding: 0.75rem; vertical-align: middle;">
                <a href="{% url 'receitas:detalhar_receita' receita.pk %}" class="btn btn-primary btn-sm me-2" style="color: #fff; padding: 0.25rem 0.75rem; transition: all 0.3s ease;">
                  <i class="bi bi-eye me-1"></i> Visualizar
                </a>
                <a href="{% url 'receitas:editar_receita' receita.pk %}" class="btn btn-warning btn-sm me-2" style="color: #fff; padding: 0.25rem 0.75rem; transition: all 0.3s ease;">
                  <i class="bi bi-pencil me-1"></i> Editar
                </a>
                <button class="btn btn-danger btn-sm" data-bs-toggle="modal" data-bs-target="#deleteModal{{ receita.pk }}" style="color: #fff; padding: 0.25rem 0.75rem; transition: all 0.3s ease;">
                  <i class="bi bi-trash me-1"></i> Deletar
                </button>
              </td>
            </tr>
            <div class="modal fade" id="deleteModal{{ receita.pk }}" tabindex="-1" aria-labelledby="deleteModalLabel{{ receita.pk }}" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content" style="border-radius: 15px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);">
                  <div class="modal-header bg-light" style="border-top-left-radius: 15px; border-top-right-radius: 15px; padding: 1rem;">
                    <h5 class="modal-title" id="deleteModalLabel{{ receita.pk }}" style="color: #dc3545; font-size: 1.2rem; font-weight: 600;">Confirmar Deleção</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body" style="color: #333; font-size: 1rem; font-weight: 400; padding: 1.5rem;">
                    Tem certeza que deseja deletar a receita "{{ receita.nome }}"?
                  </div>
                  <div class="modal-footer bg-light" style="border-bottom-left-radius: 15px; border-bottom-right-radius: 15px; padding: 1rem;">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="color: #fff; padding: 0.375rem 1rem; transition: all 0.3s ease;">Cancelar</button>
                    <form method="post" action="{% url 'receitas:deletar_receita' receita.pk %}">
                      {% csrf_token %}
                      <button type="submit" class="btn btn-danger" style="color: #fff; padding: 0.375rem 1rem; transition: all 0.3s ease;">Deletar</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <p class="text-center text-muted" style="color: #666; font-size: 1.1rem; font-weight: 400; padding: 2rem; background: #fff; border-radius: 10px;">Nenhuma receita cadastrada.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
{% block extra_scripts %}
<style>
  .btn-success:hover { background: linear-gradient(45deg, #218838, #28a745); color: #fff; transform: translateY(-2px); }
  .btn-primary:hover { background: linear-gradient(45deg, #b02a37, #dc3545); color: #fff; transform: translateY(-2px); }
  .btn-warning:hover { background: linear-gradient(45deg, #e0a800, #ffc107); color: #fff; transform: translateY(-2px); }
  .btn-danger:hover { background: linear-gradient(45deg, #b02a37, #dc3545); color: #fff; transform: translateY(-2px); }
  .btn-secondary:hover { background: linear-gradient(45deg, #6c757d, #5a6268); color: #fff; transform: translateY(-2px); }
  .table-responsive { border-radius: 10px; overflow: hidden; }
  .table { background: #fff; margin-bottom: 0; }
  .table thead th { background: #f8f9fa; border-bottom: none; }
  .table tbody tr:hover { background: #f1f3f5; transition: background 0.3s ease; }
  .placeholder-img { border: 1px solid #ccc; }
  @media (max-width: 768px) {
    .table thead th { font-size: 0.9rem; padding: 0.5rem; }
    .table td { font-size: 0.9rem; padding: 0.5rem; }
    .card-body .btn { width: 100%; margin-bottom: 5px; }
    .modal-dialog { margin: 10px; }
    .card-header h5 { font-size: 1.3rem; }
    .img-fluid { max-height: 40px; max-width: 40px; }
  }
  @media (max-width: 576px) {
    .table { font-size: 0.85rem; }
    .card-header h5 { font-size: 1.2rem; }
    .btn-sm { padding: 0.25rem 0.5rem; font-size: 0.875rem; }
    .modal-title { font-size: 1.1rem; }
  }
</style>
{% endblock %}