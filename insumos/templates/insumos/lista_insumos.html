{% extends 'core/base.html' %}
{% load widget_tweaks %}
{% block content_title %}Lista de Insumos{% endblock %}
{% block content %}
<div class="container-fluid" style="width: 100%; padding-right: 0;">
  <div class="card border-0 shadow-sm" style="border-radius: 15px;">
    <div class="card-header bg-gradient" style="background: linear-gradient(45deg, #dc3545, #e4606d); border-top-left-radius: 15px; border-top-right-radius: 15px;">
      <h5 class="text-white m-0" style="font-size: 1.3rem; font-weight: 600; display: flex; align-items: center;">
        <i class="bi bi-list-ul me-2"></i> Lista de Insumos
      </h5>
    </div>
    <div class="card-body p-4" style="background: #fff; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
      {% if messages %}
      <div class="alert alert-success alert-dismissible fade show mb-4" role="alert" style="color: #000; border-radius: 10px; font-size: 1rem; font-weight: 400;">
        {% for message in messages %}
        {{ message }}
        {% endfor %}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      {% endif %}
      {% if insumos %}
      <table class="table table-striped table-hover" style="color: #000;">
        <thead>
          <tr class="bg-light">
            <th style="font-size: 1rem; font-weight: 500;">Nome</th>
            <th style="font-size: 1rem; font-weight: 500;">Quantidade</th>
            <th style="font-size: 1rem; font-weight: 500;">Unidade</th>
            <th style="font-size: 1rem; font-weight: 500;">Preço Unitário</th>
            <th style="font-size: 1rem; font-weight: 500;">Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for insumo in insumos %}
          <tr>
            <td>{{ insumo.nome }}</td>
            <td>{{ insumo.quantidade_estoque }}</td>
            <td>{{ insumo.unidade_medida }}</td>
            <td>R$ {{ insumo.preco_unitario|floatformat:2 }}</td>
            <td>
              <a href="{% url 'insumos:detalhar_insumo' insumo.id %}" class="btn btn-info btn-sm rounded-pill me-2" style="color: #fff;">
                <i class="bi bi-eye"></i>
              </a>
              <a href="{% url 'insumos:editar_insumo' insumo.id %}" class="btn btn-warning btn-sm rounded-pill me-2" style="color: #fff;">
                <i class="bi bi-pencil"></i>
              </a>
              <a href="{% url 'insumos:excluir_insumo' insumo.id %}" class="btn btn-danger btn-sm rounded-pill" style="color: #fff;">
                <i class="bi bi-trash"></i>
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p class="text-center">Nenhum insumo cadastrado.</p>
      {% endif %}
      <div class="text-end mt-3">
        <a href="{% url 'insumos:criar_insumo' %}" class="btn btn-primary rounded-pill" style="background: linear-gradient(45deg, #dc3545, #e4606d); border: none; padding: 10px 20px; color: #fff;">
          <i class="bi bi-plus-lg"></i> Novo Insumo
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}